{"version":3,"file":"vue-chunk.js","sources":["../../src/ts/transformers/vue.ts"],"sourcesContent":["import ts from 'typescript';\nimport type { VirtualCode } from '@vue/language-core';\nimport { forEachEmbeddedCode, getDefaultVueLanguagePlugins } from '@vue/language-core';\nimport * as vueCompilerDOM from '@vue/compiler-dom';\nimport * as vue from '@vue/language-core';\n\nlet VueVirtualCode: typeof vue.VueVirtualCode | undefined;\nif ('VueVirtualCode' in vue) {\n  VueVirtualCode = vue.VueVirtualCode;\n} else if ('VueGeneratedCode' in vue) {\n  VueVirtualCode = (vue as any).VueGeneratedCode;\n}\n\nconst vueCompilerOptions = vue.resolveVueCompilerOptions({});\n\nlet plugins: ReturnType<typeof getDefaultVueLanguagePlugins> | undefined;\n\nexport const transform = (sourceFile: ts.SourceFile): VirtualCode | undefined => {\n  if (!VueVirtualCode) {\n    return undefined;\n  } else if (!plugins) {\n    plugins = getDefaultVueLanguagePlugins({\n      modules: {\n        typescript: ts,\n        '@vue/compiler-dom': vueCompilerDOM,\n      },\n      compilerOptions: {},\n      globalTypesHolder: undefined,\n      vueCompilerOptions,\n    });\n  }\n\n  const snapshot = ts.ScriptSnapshot.fromString(sourceFile.getFullText());\n  const root = new VueVirtualCode(\n    sourceFile.fileName,\n    'vue',\n    snapshot,\n    vueCompilerOptions,\n    plugins,\n    ...([ts, false] as any as [typeof ts])\n  );\n  for (const code of forEachEmbeddedCode(root)) if (code.id.startsWith('script_')) return code;\n};\n"],"names":["VueVirtualCode","vue","VueGeneratedCode","vueCompilerOptions","resolveVueCompilerOptions","plugins","sourceFile","getDefaultVueLanguagePlugins","modules","typescript","ts","vueCompilerDOM","compilerOptions","globalTypesHolder","undefined","snapshot","ScriptSnapshot","fromString","getFullText","root","fileName","code","forEachEmbeddedCode","id","startsWith"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAIA;;AACJ,IAAI,oBAAoBC;EACtBD,IAAiBC,EAAID;OAChB,IAAI,sBAAsBC;EAC/BD,IAAkBC,EAAYC;;;AAGhC,IAAMC,IAAqBF,EAAIG,0BAA0B,CAAA;;AAEzD,IAAIC;;oBAEsBC;EACxB,KAAKN;IACH;SACK,KAAKK;IACVA,IAAUE,EAAAA,6BAA6B;MACrCC,SAAS;QACPC,YAAYC;QACZ,qBAAqBC;;MAEvBC,iBAAiB,CAAE;MACnBC,wBAAmBC;MACnBX;;;EAIJ,IAAMY,IAAWL,EAAGM,eAAeC,WAAWX,EAAWY;EACzD,IAAMC,IAAO,IAAInB,EACfM,EAAWc,UACX,OACAL,GACAZ,GACAE,MACI,EAACK,IAAI;EAEX,KAAK,IAAMW,KAAQC,sBAAoBH;IAAO,IAAIE,EAAKE,GAAGC,WAAW;MAAY,OAAOH;;;AAAI"}